version: '3.8'
services:
  web:
    image: nginx:latest
    volumes:
      - stack_volume:/data
    deploy:
      replicas: 10
      restart_policy:
        condition: on-failure
    networks:
      - webnet
  client:
    image: yajithd/client:latest
    environment:
      CLIENT_ID: "${CLIENT_ID}"
      SERVER_URL: "${SERVER_URL}"
    networks:
      - webnet

volumes:
  stack_volume:

networks:
  webnet:
