version: '3.8'
services:
  web:
    image: nginx:latest
    volumes:
      - stack_volume:/data
    deploy:
      replicas: 10
      restart_policy:
        condition: on-failure
    networks:
      - webnet
  client:
    image: yajithd/client:latest
    environment:
      CLIENT_ID: "3ec271aa-8c65-40f9-a684-821901c11fff"
      SERVER_URL: "http://10.20.0.23:5000/ping"
      TEST_VAR: "v2"
    networks:
      - webnet            

volumes:
  stack_volume:

networks:
  webnet:
