version: '3.8'
services:
  web:
    image: nginx:latest
    volumes:
      - stack_volume:/data
    deploy:
      replicas: 10
      restart_policy:
        condition: on-failure
    networks:
      - webnet
  client:
    image: yajithd/client:latest
    environment:
      CLIENT_ID: "6ffbb196-f05d-4b33-ad30-c25c0e56ed9b"
      SERVER_URL: "http://10.20.0.23:5000/ping"
    networks:
      - webnet            

volumes:
  stack_volume:

networks:
  webnet:
