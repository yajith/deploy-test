version: '3.8'
services:
  web:
    image: nginx:latest
    volumes:
      - stack_volume:/data
    deploy:
      replicas: 10
      restart_policy:
        condition: on-failure
    networks:
      - webnet
  client:
    image: yajithd/client:latest
    environment:
      CLIENT_ID: "f8b7bd8d-4c44-47fd-8f40-98dfa32fe044"
      SERVER_URL: "http://10.20.0.23:5000/ping"
    networks:
      - webnet            

volumes:
  stack_volume:

networks:
  webnet:
